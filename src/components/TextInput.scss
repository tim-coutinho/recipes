@use "vars";

$padding-lr: 5px;
$padding-tb: 5px;
$input-border-width: 2px;
$input-height: 1.5em;

@mixin default-input($transition-duration, $border-width) {
  border-radius: 4px;
  border: $border-width solid vars.$od-comment-grey;
  color: vars.$od-black;
  font-size: initial;
  height: 100%;
  outline: none;
  padding: 0 0 0 $padding-lr;
  transition: $transition-duration;
  width: inherit;
}

.text-input {
  align-items: flex-end;
  display: flex;
  height: calc(#{$input-height} + 1em + #{$input-border-width} * 4);
  position: relative;

  &.invalid {
    label {
      color: vars.$od-dark-red;

      i {
        cursor: help;
      }
    }
  }

  .fa-close {
    color: vars.$od-dark-red;
    cursor: pointer;
    opacity: 0.75;
    position: absolute;
    right: $input-border-width + 5px;
    bottom: calc(#{$input-height} / 2 - 0.25em - #{$input-border-width});
    transition: opacity vars.$standard-transition-duration / 2;
    visibility: hidden;

    &:hover {
      opacity: 1;
    }
  }

  input {
    @include default-input(vars.$standard-transition-duration / 2, $input-border-width);

    &:focus {
      border-color: vars.$od-blue;

      ~ label {
        color: vars.$od-blue;
      }
    }

    &:focus,
    &:not([value=""]) {
      height: calc(#{$input-height} + #{$input-border-width} * 2);

      ~ label {
        cursor: default;
        left: $input-border-width;
        top: -$input-border-width;
      }
    }

    &:not([value=""]) ~ .fa-close {
      visibility: visible;
    }
  }

  label {
    color: vars.$od-white;
    cursor: text;
    font-size: initial;
    left: $input-border-width + $padding-lr;
    pointer-events: none;
    position: absolute;
    top: calc(#{$input-height} / 2);
    transition: vars.$standard-transition-duration / 2;
    user-select: none;

    i {
      opacity: 0;
      transition: opacity vars.$standard-transition-duration;
    }
  }
}
